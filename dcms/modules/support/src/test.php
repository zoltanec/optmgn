<?php
$data =  "--bcaec51b14cd8b36f004d37a0a8a
Content-Type: text/plain; charset=ISO-8859-1

test message

--bcaec51b14cd8b36f004d37a0a8a
Content-Type: text/html; charset=ISO-8859-1

test message

--bcaec51b14cd8b36f004d37a0a8a--";


$data = "--e89a8f5031fce83b0504d37a3f1b
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: base64

58/T0M/EwSwg0M/LwSDOxdQgz9TXxdTBIM/UIPfB0y4K8SDHz9TP1yDL1dDJ1Ngg0NLFzcnVzS3B
y8vB1c7UIM7BIM3F09HDLCDOzyDNzsUgzsXPwsjPxMnNzywg3tTPwtkg1SDNxc7RCtTBy9bFIMLZ
zCDX2cQuINDPzNjTy8nKIElQLiD32SDNz9bF1MUgzc7FIMTP0M/MzsnUxczYzs8g0NLFxM/T1MHX
ydTYIM7BCs3F09HDINfZxC4g0M/M2NPLycogSVA/CgoK8yDV18HWxc7Jxc0sCjE3INHO18HS0SAy
MDEzIMcuLCAxMzoxMiDQz8zY2s/XwdTFzNggU2FpbnQgSmFjayA8c250amFja0BnbWFpbC5jb20+
zsHQydPBzDoKCj4g68HLwdEgw8XOwSDEzNEgzcXO0SDC1cTF1D8KPiDnz9TP1yDOwSDNxdPRwyDL
1dDJ1Ngg09TB1NXTIFZJUCwgwSDUwcvWxSDHz9TP1yDVIPfB0yDL1dDJ1NggzsEgzcXT0cMKPiDQ
z8zY08vJyiDX2cQuIElQLgo+Cg==
--e89a8f5031fce83b0504d37a3f1b
Content-Type: text/html; charset=KOI8-R
Content-Transfer-Encoding: base64

PGRpdj7nz9PQz8TBLCDQz8vBIM7F1CDP1NfF1MEgz9Qg98HTLjwvZGl2Pgo8ZGl2PvEgx8/Uz9cg
y9XQydTYINDSxc3J1c0twcvLwdXO1CDOwSDNxdPRwywgzs8gzc7FIM7Fz8LIz8TJzc8sIN7Uz8LZ
INUgzcXO0SDUwcvWxSDC2cwg19nELiDQz8zY08vJyiBJUC4g99kgzc/WxdTFIM3OxSDEz9DPzM7J
1MXM2M7PINDSxcTP09TB18nU2CDOwSDNxdPRwyDX2cQuINDPzNjTy8nKIElQPzwvZGl2Pgo8ZGl2
Ppo8L2Rpdj4KPGRpdj6aPC9kaXY+CjxkaXY+8yDV18HWxc7Jxc0sPGJyPjwvZGl2Pgo8ZGl2IGNs
YXNzPSJnbWFpbF9xdW90ZSI+MTcg0c7XwdLRIDIwMTMgxy4sIDEzOjEyINDPzNjaz9fB1MXM2CBT
YWludCBKYWNrIDxzcGFuIGRpcj0ibHRyIj4mbHQ7PGEgaHJlZj0ibWFpbHRvOnNudGphY2tAZ21h
aWwuY29tIiB0YXJnZXQ9Il9ibGFuayI+c250amFja0BnbWFpbC5jb208L2E+Jmd0Ozwvc3Bhbj4g
zsHQydPBzDo8YnI+CjxibG9ja3F1b3RlIHN0eWxlPSJCT1JERVItTEVGVDojY2NjIDFweCBzb2xp
ZDtNQVJHSU46MHB4IDBweCAwcHggMC44ZXg7UEFERElORy1MRUZUOjFleCIgY2xhc3M9ImdtYWls
X3F1b3RlIj4KPGRpdj7rwcvB0SDDxc7BIMTM0SDNxc7RIMLVxMXUPzwvZGl2Pgo8ZGl2PufP1M/X
IM7BIM3F09HDIMvV0MnU2CDT1MHU1dMgVklQLCDBINTBy9bFIMfP1M/XINUg98HTIMvV0MnU2CDO
wSDNxdPRwyDQz8zY08vJyiDX2cQuIElQLjwvZGl2PjwvYmxvY2txdW90ZT48L2Rpdj48YnI+PGJy
Pgo=
--e89a8f5031fce83b0504d37a3f1b--";

$data = "--20cf3079b9486ceffb04d37b6ff7
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: base64

wSDZ19Ag2dfB0CDZ18HQCg==
--20cf3079b9486ceffb04d37b6ff7
Content-Type: text/html; charset=KOI8-R
Content-Transfer-Encoding: base64

wSDZ19Ag2dfB0CDZ18HQCg==
--20cf3079b9486ceffb04d37b6ff7--";

$msg = unserialize(base64_decode("YTo0OntzOjc6ImhlYWRlcnMiO2E6NDp7czo3OiJTdWJqZWN0IjtzOjQ1OiLQutCw0Log0LzQvdC1INC60YPQv9C40YLRjCDRgyDQstCw0YEg0LLQv9C90LAiO3M6MTE6IlJldHVybi1QYXRoIjtzOjIyOiJqb2huLmdvLmRhdGFAZ21haWwuY29tIjtzOjE3OiJDb250ZW50LVR5cGUtTW9kZSI7czoyMjoibXVsdGlwYXJ0L2FsdGVybmF0aXZlOyI7czoxNjoiQ29udGVudC1Cb3VuZGFyeSI7czoyODoiYmNhZWM1NGZiNDE2NjQxNjk4MDRkMzdiYWI5ZSI7fXM6ODoiaGVhZGVyczIiO2E6MTQ6e3M6MTI6IkRlbGl2ZXJlZC1UbyI7czoxOToic3VwcG9ydEBoaWRlbWFuLm5ldCI7czo4OiJSZWNlaXZlZCI7YTo0OntpOjA7czo4MjoiYnkgMTAuMTQuMjA5LjEzMiB3aXRoIFNNVFAgaWQgczRjc3A2OTk4NWVlbzsgVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NyAtMDgwMCAoUFNUKSI7aToxO3M6MjMzOiJmcm9tIG1haWwtdmIwLWY0MS5nb29nbGUuY29tIChtYWlsLXZiMC1mNDEuZ29vZ2xlLmNvbSBbMjA5Ljg1LjIxMi40MV0pIGJ5IG14Lmdvb2dsZS5jb20gd2l0aCBFU01UUFMgaWQgdTFzaTExNTYyMzd2ZGguMjAuMjAxMy4wMS4xNy4wNS4wNi41NiAodmVyc2lvbj1UTFN2MSBjaXBoZXI9RUNESEUtUlNBLVJDNC1TSEEgYml0cz0xMjgvMTI4KTsgVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NyAtMDgwMCAoUFNUKSI7aToyO3M6MTIyOiJieSBtYWlsLXZiMC1mNDEuZ29vZ2xlLmNvbSB3aXRoIFNNVFAgaWQgbDIyc28yNTA4Nzc2dmJuLjAgZm9yIDxzdXBwb3J0QGhpZGVtYW4ubmV0PjsgVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NiAtMDgwMCAoUFNUKSI7aTozO3M6NjU6ImJ5IDEwLjU4LjIzOC4xNjYgd2l0aCBIVFRQOyBUaHUsIDE3IEphbiAyMDEzIDA1OjA2OjU2IC0wODAwIChQU1QpIjt9czoxMDoiWC1SZWNlaXZlZCI7YToyOntpOjA7czo5OToiYnkgMTAuMjIwLjguMTggd2l0aCBTTVRQIGlkIGYxOG1yNTI5NjEyMXZjZi4xNC4xMzU4NDI4MDE3MTkyOyBUaHUsIDE3IEphbiAyMDEzIDA1OjA2OjU3IC0wODAwIChQU1QpIjtpOjE7czoxMDI6ImJ5IDEwLjIyMS4xMS4yMDUgd2l0aCBTTVRQIGlkIHBmMTNtcjUxMjMzNTN2Y2IuNzAuMTM1ODQyODAxNjc0MzsgVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NiAtMDgwMCAoUFNUKSI7fXM6MTE6IlJldHVybi1QYXRoIjtzOjI0OiI8am9obi5nby5kYXRhQGdtYWlsLmNvbT4iO3M6MTI6IlJlY2VpdmVkLVNQRiI7czoxMjE6InBhc3MgKGdvb2dsZS5jb206IGRvbWFpbiBvZiBqb2huLmdvLmRhdGFAZ21haWwuY29tIGRlc2lnbmF0ZXMgMjA5Ljg1LjIxMi40MSBhcyBwZXJtaXR0ZWQgc2VuZGVyKSBjbGllbnQtaXA9MjA5Ljg1LjIxMi40MTsiO3M6MjI6IkF1dGhlbnRpY2F0aW9uLVJlc3VsdHMiO3M6MTc5OiJteC5nb29nbGUuY29tOyBzcGY9cGFzcyAoZ29vZ2xlLmNvbTogZG9tYWluIG9mIGpvaG4uZ28uZGF0YUBnbWFpbC5jb20gZGVzaWduYXRlcyAyMDkuODUuMjEyLjQxIGFzIHBlcm1pdHRlZCBzZW5kZXIpIHNtdHAubWFpbD1qb2huLmdvLmRhdGFAZ21haWwuY29tOyBka2ltPXBhc3MgaGVhZGVyLmk9QGdtYWlsLmNvbSI7czoxNDoiREtJTS1TaWduYXR1cmUiO3M6NTM2OiJ2PTE7IGE9cnNhLXNoYTI1NjsgYz1yZWxheGVkL3JlbGF4ZWQ7IGQ9Z21haWwuY29tOyBzPTIwMTIwMTEzOyBoPW1pbWUtdmVyc2lvbjp4LXJlY2VpdmVkOmRhdGU6bWVzc2FnZS1pZDpzdWJqZWN0OmZyb206dG8gOmNvbnRlbnQtdHlwZTsgYmg9U1kwUzZ5S3Y3UXZ4TWt3ZFJhTUsxWXEwVFdTYTJXU2pwaHNCTjVwaTI2RT07IGI9UGNKb05PRlNrRVJYR1J0eGUwYnlpbHdPUWQ0QUdPN250MkN2ZWhyVzZiMStMQ1kwYWc1TUFzUWRwK2ovYmY4ek5rIG1IWkVCN1paR0kxOUlQY1hhWGpsSDNYRXc3alYwYURjMGE2dDAyNHVtaUtnV2RMV09TVERHRFNhd0l6Zi9nRWNUNlBhIHBPekV1WERoclB3ckxIRjJyYXg5LzFDWGwzdURGV0NaWmo2TUcrZlQ5TzB5MVFYVk1MY01wRWFuTVBxSkl5L3ZMZTBOIEEwMEZnV3NoMzFqcjlNeWZWazBYQVVmVWdRQWlUK2VkMmpVbVFWdlBUMm10M1I0dkQyZUZMOEE4NW5oaXdpQWdzYkpYIExtektObGhLZEpwWXI4alVaZFVrUWJPd2puNGYvaTk3eHluaFZ5ekdHZ2dOK08vajZxVDFkTzJKZjh0Y09GREFJSysxIGIxZGc9PSI7czoxMjoiTUlNRS1WZXJzaW9uIjtzOjM6IjEuMCI7czo0OiJEYXRlIjtzOjMxOiJUaHUsIDE3IEphbiAyMDEzIDE5OjA2OjU2ICswNjAwIjtzOjEwOiJNZXNzYWdlLUlEIjtzOjY4OiI8Q0FPM2ZwR0I9d0FMPWlwYmZEMWNRR211MVdycVZXUE5hLWctbThOMFNCMkpGZ0w5VDZnQG1haWwuZ21haWwuY29tPiI7czo3OiJTdWJqZWN0IjtzOjQ5OiI9P0tPSTgtUj9CP3k4SExJTTNPeFNETDFkREoxTmdnMVNEWHdkTWcxOURPd1E9PT89IjtzOjQ6IkZyb20iO3M6MzU6IkpvaG4gU2NvdHQgPGpvaG4uZ28uZGF0YUBnbWFpbC5jb20+IjtzOjI6IlRvIjtzOjM1OiJIaWRlbWFuIFJvYm90IDxzdXBwb3J0QGhpZGVtYW4ubmV0PiI7czoxMjoiQ29udGVudC1UeXBlIjtzOjYwOiJtdWx0aXBhcnQvYWx0ZXJuYXRpdmU7IGJvdW5kYXJ5PWJjYWVjNTRmYjQxNjY0MTY5ODA0ZDM3YmFiOWUiO31zOjQ6ImJvZHkiO3M6MzY5OiItLWJjYWVjNTRmYjQxNjY0MTY5ODA0ZDM3YmFiOWUNCkNvbnRlbnQtVHlwZTogdGV4dC9wbGFpbjsgY2hhcnNldD1LT0k4LVINCkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NA0KDQoyZGZCSU5uWHdTRFoxOEVnMFNESXo5N1ZJTmZRenNFaElTRXhJTUhNMGRMTndTRFB6TS9NendvPQ0KLS1iY2FlYzU0ZmI0MTY2NDE2OTgwNGQzN2JhYjllDQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD1LT0k4LVINCkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NA0KDQoyZGZCSU5uWHdTRFoxOEVnMFNESXo5N1ZJTmZRenNFaElTRXhJTUhNMGRMTndTRFB6TS9NendvPQ0KLS1iY2FlYzU0ZmI0MTY2NDE2OTgwNGQzN2JhYjllLS0iO3M6MzoibXNnIjtzOjI2NDg6IkRlbGl2ZXJlZC1Ubzogc3VwcG9ydEBoaWRlbWFuLm5ldA0KUmVjZWl2ZWQ6IGJ5IDEwLjE0LjIwOS4xMzIgd2l0aCBTTVRQIGlkIHM0Y3NwNjk5ODVlZW87DQogICAgICAgIFRodSwgMTcgSmFuIDIwMTMgMDU6MDY6NTcgLTA4MDAgKFBTVCkNClgtUmVjZWl2ZWQ6IGJ5IDEwLjIyMC44LjE4IHdpdGggU01UUCBpZCBmMThtcjUyOTYxMjF2Y2YuMTQuMTM1ODQyODAxNzE5MjsNCiAgICAgICAgVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NyAtMDgwMCAoUFNUKQ0KUmV0dXJuLVBhdGg6IDxqb2huLmdvLmRhdGFAZ21haWwuY29tPg0KUmVjZWl2ZWQ6IGZyb20gbWFpbC12YjAtZjQxLmdvb2dsZS5jb20gKG1haWwtdmIwLWY0MS5nb29nbGUuY29tIFsyMDkuODUuMjEyLjQxXSkNCiAgICAgICAgYnkgbXguZ29vZ2xlLmNvbSB3aXRoIEVTTVRQUyBpZCB1MXNpMTE1NjIzN3ZkaC4yMC4yMDEzLjAxLjE3LjA1LjA2LjU2DQogICAgICAgICh2ZXJzaW9uPVRMU3YxIGNpcGhlcj1FQ0RIRS1SU0EtUkM0LVNIQSBiaXRzPTEyOC8xMjgpOw0KICAgICAgICBUaHUsIDE3IEphbiAyMDEzIDA1OjA2OjU3IC0wODAwIChQU1QpDQpSZWNlaXZlZC1TUEY6IHBhc3MgKGdvb2dsZS5jb206IGRvbWFpbiBvZiBqb2huLmdvLmRhdGFAZ21haWwuY29tIGRlc2lnbmF0ZXMgMjA5Ljg1LjIxMi40MSBhcyBwZXJtaXR0ZWQgc2VuZGVyKSBjbGllbnQtaXA9MjA5Ljg1LjIxMi40MTsNCkF1dGhlbnRpY2F0aW9uLVJlc3VsdHM6IG14Lmdvb2dsZS5jb207DQogICAgICAgc3BmPXBhc3MgKGdvb2dsZS5jb206IGRvbWFpbiBvZiBqb2huLmdvLmRhdGFAZ21haWwuY29tIGRlc2lnbmF0ZXMgMjA5Ljg1LjIxMi40MSBhcyBwZXJtaXR0ZWQgc2VuZGVyKSBzbXRwLm1haWw9am9obi5nby5kYXRhQGdtYWlsLmNvbTsNCiAgICAgICBka2ltPXBhc3MgaGVhZGVyLmk9QGdtYWlsLmNvbQ0KUmVjZWl2ZWQ6IGJ5IG1haWwtdmIwLWY0MS5nb29nbGUuY29tIHdpdGggU01UUCBpZCBsMjJzbzI1MDg3NzZ2Ym4uMA0KICAgICAgICBmb3IgPHN1cHBvcnRAaGlkZW1hbi5uZXQ+OyBUaHUsIDE3IEphbiAyMDEzIDA1OjA2OjU2IC0wODAwIChQU1QpDQpES0lNLVNpZ25hdHVyZTogdj0xOyBhPXJzYS1zaGEyNTY7IGM9cmVsYXhlZC9yZWxheGVkOw0KICAgICAgICBkPWdtYWlsLmNvbTsgcz0yMDEyMDExMzsNCiAgICAgICAgaD1taW1lLXZlcnNpb246eC1yZWNlaXZlZDpkYXRlOm1lc3NhZ2UtaWQ6c3ViamVjdDpmcm9tOnRvDQogICAgICAgICA6Y29udGVudC10eXBlOw0KICAgICAgICBiaD1TWTBTNnlLdjdRdnhNa3dkUmFNSzFZcTBUV1NhMldTanBoc0JONXBpMjZFPTsNCiAgICAgICAgYj1QY0pvTk9GU2tFUlhHUnR4ZTBieWlsd09RZDRBR083bnQyQ3ZlaHJXNmIxK0xDWTBhZzVNQXNRZHArai9iZjh6TmsNCiAgICAgICAgIG1IWkVCN1paR0kxOUlQY1hhWGpsSDNYRXc3alYwYURjMGE2dDAyNHVtaUtnV2RMV09TVERHRFNhd0l6Zi9nRWNUNlBhDQogICAgICAgICBwT3pFdVhEaHJQd3JMSEYycmF4OS8xQ1hsM3VERldDWlpqNk1HK2ZUOU8weTFRWFZNTGNNcEVhbk1QcUpJeS92TGUwTg0KICAgICAgICAgQTAwRmdXc2gzMWpyOU15ZlZrMFhBVWZVZ1FBaVQrZWQyalVtUVZ2UFQybXQzUjR2RDJlRkw4QTg1bmhpd2lBZ3NiSlgNCiAgICAgICAgIExtektObGhLZEpwWXI4alVaZFVrUWJPd2puNGYvaTk3eHluaFZ5ekdHZ2dOK08vajZxVDFkTzJKZjh0Y09GREFJSysxDQogICAgICAgICBiMWRnPT0NCk1JTUUtVmVyc2lvbjogMS4wDQpYLVJlY2VpdmVkOiBieSAxMC4yMjEuMTEuMjA1IHdpdGggU01UUCBpZCBwZjEzbXI1MTIzMzUzdmNiLjcwLjEzNTg0MjgwMTY3NDM7DQogVGh1LCAxNyBKYW4gMjAxMyAwNTowNjo1NiAtMDgwMCAoUFNUKQ0KUmVjZWl2ZWQ6IGJ5IDEwLjU4LjIzOC4xNjYgd2l0aCBIVFRQOyBUaHUsIDE3IEphbiAyMDEzIDA1OjA2OjU2IC0wODAwIChQU1QpDQpEYXRlOiBUaHUsIDE3IEphbiAyMDEzIDE5OjA2OjU2ICswNjAwDQpNZXNzYWdlLUlEOiA8Q0FPM2ZwR0I9d0FMPWlwYmZEMWNRR211MVdycVZXUE5hLWctbThOMFNCMkpGZ0w5VDZnQG1haWwuZ21haWwuY29tPg0KU3ViamVjdDogPT9LT0k4LVI/Qj95OEhMSU0zT3hTREwxZERKMU5nZzFTRFh3ZE1nMTlET3dRPT0/PQ0KRnJvbTogSm9obiBTY290dCA8am9obi5nby5kYXRhQGdtYWlsLmNvbT4NClRvOiBIaWRlbWFuIFJvYm90IDxzdXBwb3J0QGhpZGVtYW4ubmV0Pg0KQ29udGVudC1UeXBlOiBtdWx0aXBhcnQvYWx0ZXJuYXRpdmU7IGJvdW5kYXJ5PWJjYWVjNTRmYjQxNjY0MTY5ODA0ZDM3YmFiOWUNCg0KLS1iY2FlYzU0ZmI0MTY2NDE2OTgwNGQzN2JhYjllDQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9S09JOC1SDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBiYXNlNjQNCg0KMmRmQklOblh3U0RaMThFZzBTREl6OTdWSU5mUXpzRWhJU0V4SU1ITTBkTE53U0RQek0vTXp3bz0NCi0tYmNhZWM1NGZiNDE2NjQxNjk4MDRkMzdiYWI5ZQ0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9S09JOC1SDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBiYXNlNjQNCg0KMmRmQklOblh3U0RaMThFZzBTREl6OTdWSU5mUXpzRWhJU0V4SU1ITTBkTE53U0RQek0vTXp3bz0NCi0tYmNhZWM1NGZiNDE2NjQxNjk4MDRkMzdiYWI5ZS0tIjt9"));

header("Content-Type: text/plain; charset=UTF-8");
//var_dump($msg);

var_dump(Support_Pop::getByBoundary($msg['body'], $msg['headers']['Content-Boundary']));

exit;