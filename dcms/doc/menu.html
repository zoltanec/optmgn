Работа меню:

Для использования меню в движке используется класс Core_Menu_Object, он содержит в себе элементы меню Core_Menu_Item. 
Каждый item может содержать вложенные в него подэлементы. 

Объекты меню содержаться в таблице #PX#_core_menus. В этой таблице содержится:
- menu_id, уникальный текстовый идентификатор меню на инглише- например main, left, top, sidebar, adminmenu; 
- Имя меню - например Главное меню или Левое меню и тд;
- флаг активности меню.

Меню содержит свойствой items. Оно возвращает элементы нулевого уровня у данного меню.

Core_Menu_Item - хранится в таблице #PX#_core_menu_items. Она содержит следующую информацию:
- item_id - MEDIUM INT UNSIGNED PRIMARY KEY - уникальный идентификатор меню;
- parent_id - идентификатор родительского объекта, если элемент является корневым то 0;
- menu_id - идентификатор объекта меню к которому относится данный элемент;
- name, Языковой код элемента меню - ВСЕ ТЕКСТЫ ЭЛЕМЕНТОВ МЕНЮ ДОЛЖНЫ БЫТЬ ЛОКАЛИЗОВАНЫ, и их названия должны идти через модуль локализации;
- descr, Языковой код подсказки к данному меню - через локализацию аналогично;
- url, адрес по которому необходимо переходить в данном меню;
- active, Активность - включен нет;
- Приоритет - порядок сортировки элементов меню;
- Если есть, то функция , которая будет вызвана для формирования подменю данного элемента (например загрузки подразделов);

Выборка элементов меню в объекте Core_Menu_Object должны быть типа такой:

protected function __get_items() {
	return Core_Menu_Items::getByMenyID($this->menu_id);
}

Функция getByMenyID() должна производить выборку ВСЕХ элементов с данным menu_id после чего строить дерево. 
Каждый объект Core_Menu_Item должен предоставлять доступ ArrayAccess, чтобы была возможность работы с элементами меню вида:
$item[$item_id1][$item_id2][$item_id3] и тд. 

 Пример использования меню в шаблоне:

<{assign var=mainmenu value=D_Core_Factory::D_Menu_Object('main')}>

<{foreach item=elem from=$mainmenu->items}>
	<a href="<{$item->url}>" title="<{$item->descr}>"><{$item->name}</a>
<{/foreach}>