<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="../style.css" rel="stylesheet" type="text/css">
<title>Стандарт программирования</title>
</head>
<body>
<h2>Именование контроллеров</h2>
Каждый контроллер находится в отдельном файле. Файлы контроллеров пользовательской 
части сайта находятся в каталоге src. Файлы администраторской части расположены в 
каталоге admin. Имена файлов контроллеров должны содержать буквы латинского алфавита, 
символ подчеркивания и/или цифры. Список стандартных действий используемых для именования контроллеров:
<ul>
 <li><b>add</b> - добавление нового объекта;
 <li><b>submit</b> - создание нового объекта;
 <li><b>edit</b> - редактирование;
 <li><b>update</b> - обновление информации об объекте;
 <li><b>delete</b> - удаление объекта;
 <li><b>view</b> - просмотр дочерних объектов;
 <li><b>show</b> - просмотр единичного объекта без дочерних.
</ul>

<h2>Описания классов</h2>
Все классы имеют имена вида MODNAME_ClassName. Классы располагаются в каталоге %modules%/models/classname.obj.php. Использование в имени класса MODNAME 

<h2>Именование переменных</h2>
Следующие правила обязательны для используемых в коде переменных:
<ul>
 <li>имена переменных состоят из одного или нескольких слов разделенных символом подчеркивания,
например <b>$site_smiles_list</b>;
 <li>переменные булевого типа должны иметь суффикс <b>_flag</b>, например <b>$allow_edit_flag</b>;
 <li>массивы должны иметь суффикс <b>_list</b>, например <b>$bad_boys_list</b>;
</ul>

<h2>Именование функций</h2>

Имена классов используют стиль Кэмел. Рекомендуемые префиксы:
<ul>
 <li><b>get</b> &mdash; получить значение;
 <li><b>set</b> &mdash; установить значение;
 <li><b>to</b> &mdash; преобразование объекта в другой;
 <li><b>is</b> &mdash; проверяем свойство объекта, например <b>$obj->isVisible()</b>;
 <li><b>append</b> &mdash; добавление к внутреннему массиву элемента, например <b>$obj->appendSearchPath($string)</b>;
 <li><b>add</b> &mdash; добавление значения свойству;
 <li><b>remove</b> &mdash; удаление элемента из внутреннего представления; 
 <li><b>run</b> &mdash; выполнение некой внутренней функции, например <b>$obj->runFirstLoginNotification()</b>;
</ul>
Стандартные суффиксы:
<ul>
 <li><b>List</b> &mdash; функция возвращает список, например <b>$obj->getHookersList()</b>;
</ul>

Блоки инструкций оформляются так:
<pre>
if(condition) {
	//code
} else {
	//code2
}
foreach($array AS $value) {
	//code
}
</pre>

<h3>Именование объектов в базе данных</h3>

<ul>
 <li><b>something_id</b> &mdash; идентификатор объекта;
 <li><b>add_time</b> &mdash; время добавления объекта в базу данных, int в UNIX-time;</li>
 <li><b>upd_time</b> &mdash; время последнего изменения, int в UNIX-time;</li>
 <li><b>last_time</b> &mdash; время последнего обращения к объекту, int в UNIX-time;</li>
 <li><b>active</b> &mdash; активен ли объект, bool;</li>
 <li><b>status</b> &mdash; состояние объекта, в виде int с определением длины;</li>
</ul>

Свойства обязательные для объектов:
<ul>
	<li>Все идентификаторы объектов должны иметь вид <b>%SUFFIX%id</b>, например для элемента истории hid или histid, для клиента cid или clid, для раздела catid и тд.
	<li>Все названия объектов должны хранится в свойстве name.
	<li>Идентификатор родительского объекта ( его поле id ) должен храниться в свойстве parentid.
</ul>

<h3>Правила написания JavaScript</h3>

<ul>
<li>Переменные пишутся в C стиле, то есть <b>want_some_bad_var, is_vasya_empty</b>;
<li>Функции и методы классов пишутся в стиле Кэмел, <b>self.isTestFunction(), self.getNewSomething()</b>;
</ul>

</ul>

<h3>Расположение файлов в каталогах</h3>
<ul>
 <li> - корневой раздел проекта
  <ul>
   <li> - configs - каталог с конфигурационными файлами, файлы имеют следующие имена: 
   	<ul>
   		<li>core.php - основной конфигурационный файл движка;
   		<li>MODNAME.php - конфигурационный файл для конкретного модуля;
   	</ul>
   </li>
   <li> - content - каталог контента, сюда помещаются все файлы которые добавляются в виде контента на сайт, медиа данные и прочее.</li>
   <li> - jscripts - каталог яваскриптов, в него скидываются хардлинки на яваскрипты отдельных модулей а так же на прочие яваскрипты</li>
   <li> - local - переопределения 
   <li> - modules - модули конкретного проекта.
   	<ul>
   		<li> - src - файлы содержащие экшены, например за экшен add-stuff отвечает файл add-stuff.php;
   		<li> - admin - файлы экшенов в административной панели;
   		<li> - install - установочные параметры модуля, например структура базы данных, список переменных настройки;
   			<ul>
   				<li> - structure.sql - структура базы данных модуля;
   				<li> - migration.sql - миграция базы данных с одной версии на другую;
   				<li> - settings.json - каталог настроек модуля в формате JSON 
   			</ul>
   		</li>
   		<li> - templates - шаблоны для экшенов. По умолчанию имя шаблона совпадает с именем экшена. Шаблоны административной панели располагаются в каталоге templates/admin/;
   		<li> - models - модели модуля, классы отвечающие за абстракцию базы данных и всего такого. Имена классов имеют вид MODNAME_Classname, 
   		имя файла при этом будет ~/modules/MODNAME/models/classname.obj.php
   		<li> - jscripts - ява скрипты модуля, по умолчанию имя имеет вид MODNAME.functions.js
   		<li> - i18n - файлы локализации. Файлы локализации имеют имена вида LANGCODE.lng
 	</ul>
   </li>
    <li> - themes - каталог тем сайта, каждая тема размещается в отдельном каталоге. Структура каталога:
     <ul>
      <li> - css - CSS - файлы темы;
      <li> - images - изображения из темы;
      <li> - templates - каталог переопределения шаблонов; содержит папки совпадающие с именами модулей. Например если есть модуль dCMS с именем mod1 и экшен act1, 
      мы можем создать каталог ~/themes/default/templates/mod1/act1.tpl, и при вызове mod1->act1 для отображения будет использован шаблон из темы. </li>
      <li> - theme.tpl - главный шаблон темы.   
     </ul>
 	<li> - work - каталог для хранения рабочих файлов движка ( скомпиленные шаблоны, временные файлы, какая либо служебная информация);</li>
  </ul>
 </li>
</ul>
 

</body>
</html>